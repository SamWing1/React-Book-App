{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bencampero/code/project-3-base/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/bencampero/code/project-3-base/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/bencampero/code/project-3-base/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{getToken}from'./users-service';export default function sendRequest(_x){return _sendRequest.apply(this,arguments);}function _sendRequest(){_sendRequest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var method,payload,options,token,res,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:'GET';payload=_args.length>2&&_args[2]!==undefined?_args[2]:null;options={method:method};if(payload){options.headers={'Content-Type':'application/json'};options.body=JSON.stringify(payload);}token=getToken();if(token){// Great use case for the Logical OR Assignment Operator\noptions.headers||(options.headers=_objectSpread(_objectSpread({},options),{},{Authorization:\"Bearer \".concat(token)}));}_context.next=8;return fetch(url,options);case 8:res=_context.sent;if(!res.ok){_context.next=11;break;}return _context.abrupt(\"return\",res.json());case 11:throw new Error('Bad Request');case 12:case\"end\":return _context.stop();}}},_callee);}));return _sendRequest.apply(this,arguments);}","map":{"version":3,"names":["getToken","sendRequest","url","method","payload","options","headers","body","JSON","stringify","token","Authorization","fetch","res","ok","json","Error"],"sources":["/Users/bencampero/code/project-3-base/src/utilities/send-request.js"],"sourcesContent":["import { getToken } from './users-service';\n\nexport default async function sendRequest(url, method = 'GET', payload = null) {\n  const options = { method };\n  if (payload) {\n    options.headers = { 'Content-Type': 'application/json' };\n    options.body = JSON.stringify(payload);\n  }\n  const token = getToken();\n  if (token) {\n    // Great use case for the Logical OR Assignment Operator\n    options.headers ||= {...options, Authorization: `Bearer ${token}`};\n  }\n  const res = await fetch(url, options);\n  // res.ok will be false if the status code is not 200-299\n  // res.json() returns a promise that resolves\n  // to the data that was sent back by the server\n  if (res.ok) return res.json();\n  throw new Error('Bad Request');\n}"],"mappings":"gYAAA,OAASA,QAAT,KAAyB,iBAAzB,CAEA,uBAA8BC,YAA9B,gD,+FAAe,iBAA2BC,GAA3B,yKAAgCC,MAAhC,+CAAyC,KAAzC,CAAgDC,OAAhD,+CAA0D,IAA1D,CACPC,OADO,CACG,CAAEF,MAAM,CAANA,MAAF,CADH,CAEb,GAAIC,OAAJ,CAAa,CACXC,OAAO,CAACC,OAAR,CAAkB,CAAE,eAAgB,kBAAlB,CAAlB,CACAD,OAAO,CAACE,IAAR,CAAeC,IAAI,CAACC,SAAL,CAAeL,OAAf,CAAf,CACD,CACKM,KANO,CAMCV,QAAQ,EANT,CAOb,GAAIU,KAAJ,CAAW,CACT;AACAL,OAAO,CAACC,OAAR,GAAAD,OAAO,CAACC,OAAR,gCAAwBD,OAAxB,MAAiCM,aAAa,kBAAYD,KAAZ,CAA9C,IACD,CAVY,sBAWKE,MAAK,CAACV,GAAD,CAAMG,OAAN,CAXV,QAWPQ,GAXO,mBAeTA,GAAG,CAACC,EAfK,0DAeMD,GAAG,CAACE,IAAJ,EAfN,eAgBP,IAAIC,MAAJ,CAAU,aAAV,CAhBO,wD"},"metadata":{},"sourceType":"module"}