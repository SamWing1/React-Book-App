{"ast":null,"code":"import { getToken } from './users-service';\nexport default async function sendRequest(url) {\n  let method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GET';\n  let payload = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  const options = {\n    method\n  };\n\n  if (payload) {\n    options.headers = {\n      'Content-Type': 'application/json'\n    };\n    options.body = JSON.stringify(payload);\n  }\n\n  const token = getToken();\n\n  if (token) {\n    // Great use case for the Logical OR Assignment Operator\n    options.headers ||= { ...options,\n      Authorization: `Bearer ${token}`\n    };\n  }\n\n  const res = await fetch(url, options); // res.ok will be false if the status code is not 200-299\n  // res.json() returns a promise that resolves\n  // to the data that was sent back by the server\n\n  if (res.ok) return res.json();\n  throw new Error('Bad Request');\n}\nexport async function sendRequestAlt(url) {\n  let method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GET';\n  let payload = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  const options = {\n    method\n  };\n\n  if (payload) {\n    options.headers = {\n      'Content-Type': 'application/json'\n    };\n    options.body = JSON.stringify(payload);\n  }\n\n  const token = getToken();\n\n  if (token) {\n    // Great use case for the Logical OR Assignment Operator\n    options.headers ||= { ...options,\n      Authorization: `Bearer ${token}`\n    };\n  }\n\n  const res = await fetch(url); // res.ok will be false if the status code is not 200-299\n  // res.json() returns a promise that resolves\n  // to the data that was sent back by the server\n\n  if (res.ok) return res.json();\n  throw new Error('Bad Request');\n}","map":{"version":3,"names":["getToken","sendRequest","url","method","payload","options","headers","body","JSON","stringify","token","Authorization","res","fetch","ok","json","Error","sendRequestAlt"],"sources":["/Users/bencampero/code/project-3-base/src/utilities/send-request.js"],"sourcesContent":["import { getToken } from './users-service';\n\nexport default async function sendRequest(url, method = 'GET', payload = null) {\n  const options = { method };\n  if (payload) {\n    options.headers = { 'Content-Type': 'application/json' };\n    options.body = JSON.stringify(payload);\n  }\n  const token = getToken();\n  if (token) {\n    // Great use case for the Logical OR Assignment Operator\n    options.headers ||= {...options, Authorization: `Bearer ${token}`};\n  }\n  const res = await fetch(url, options);\n  // res.ok will be false if the status code is not 200-299\n  // res.json() returns a promise that resolves\n  // to the data that was sent back by the server\n  if (res.ok) return res.json();\n  throw new Error('Bad Request');\n}\n\nexport async function sendRequestAlt(url, method = 'GET', payload = null) {\n  const options = { method };\n  if (payload) {\n    options.headers = { 'Content-Type': 'application/json' };\n    options.body = JSON.stringify(payload);\n  }\n  const token = getToken();\n  if (token) {\n    // Great use case for the Logical OR Assignment Operator\n    options.headers ||= {...options, Authorization: `Bearer ${token}`};\n  }\n  const res = await fetch(url);\n  // res.ok will be false if the status code is not 200-299\n  // res.json() returns a promise that resolves\n  // to the data that was sent back by the server\n  if (res.ok) return res.json();\n  throw new Error('Bad Request');\n}"],"mappings":"AAAA,SAASA,QAAT,QAAyB,iBAAzB;AAEA,eAAe,eAAeC,WAAf,CAA2BC,GAA3B,EAAgE;EAAA,IAAhCC,MAAgC,uEAAvB,KAAuB;EAAA,IAAhBC,OAAgB,uEAAN,IAAM;EAC7E,MAAMC,OAAO,GAAG;IAAEF;EAAF,CAAhB;;EACA,IAAIC,OAAJ,EAAa;IACXC,OAAO,CAACC,OAAR,GAAkB;MAAE,gBAAgB;IAAlB,CAAlB;IACAD,OAAO,CAACE,IAAR,GAAeC,IAAI,CAACC,SAAL,CAAeL,OAAf,CAAf;EACD;;EACD,MAAMM,KAAK,GAAGV,QAAQ,EAAtB;;EACA,IAAIU,KAAJ,EAAW;IACT;IACAL,OAAO,CAACC,OAAR,KAAoB,EAAC,GAAGD,OAAJ;MAAaM,aAAa,EAAG,UAASD,KAAM;IAA5C,CAApB;EACD;;EACD,MAAME,GAAG,GAAG,MAAMC,KAAK,CAACX,GAAD,EAAMG,OAAN,CAAvB,CAX6E,CAY7E;EACA;EACA;;EACA,IAAIO,GAAG,CAACE,EAAR,EAAY,OAAOF,GAAG,CAACG,IAAJ,EAAP;EACZ,MAAM,IAAIC,KAAJ,CAAU,aAAV,CAAN;AACD;AAED,OAAO,eAAeC,cAAf,CAA8Bf,GAA9B,EAAmE;EAAA,IAAhCC,MAAgC,uEAAvB,KAAuB;EAAA,IAAhBC,OAAgB,uEAAN,IAAM;EACxE,MAAMC,OAAO,GAAG;IAAEF;EAAF,CAAhB;;EACA,IAAIC,OAAJ,EAAa;IACXC,OAAO,CAACC,OAAR,GAAkB;MAAE,gBAAgB;IAAlB,CAAlB;IACAD,OAAO,CAACE,IAAR,GAAeC,IAAI,CAACC,SAAL,CAAeL,OAAf,CAAf;EACD;;EACD,MAAMM,KAAK,GAAGV,QAAQ,EAAtB;;EACA,IAAIU,KAAJ,EAAW;IACT;IACAL,OAAO,CAACC,OAAR,KAAoB,EAAC,GAAGD,OAAJ;MAAaM,aAAa,EAAG,UAASD,KAAM;IAA5C,CAApB;EACD;;EACD,MAAME,GAAG,GAAG,MAAMC,KAAK,CAACX,GAAD,CAAvB,CAXwE,CAYxE;EACA;EACA;;EACA,IAAIU,GAAG,CAACE,EAAR,EAAY,OAAOF,GAAG,CAACG,IAAJ,EAAP;EACZ,MAAM,IAAIC,KAAJ,CAAU,aAAV,CAAN;AACD"},"metadata":{},"sourceType":"module"}