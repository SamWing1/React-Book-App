{"ast":null,"code":"import { getToken } from './users-service';\nexport default async function sendRequest(url) {\n  let method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GET';\n  let payload = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  const options = {\n    method\n  };\n  console.log(payload);\n\n  if (payload) {\n    options.headers = {\n      'Content-Type': 'application/json'\n    };\n    options.body = JSON.stringify(payload);\n  }\n\n  const token = getToken();\n\n  if (token) {\n    // Great use case for the Logical OR Assignment Operator\n    options.headers ||= { ...options,\n      Authorization: `Bearer ${token}`\n    };\n  }\n\n  const res = await fetch(url, options);\n  console.log(res); // res.ok will be false if the status code is not 200-299\n  // res.json() returns a promise that resolves\n  // to the data that was sent back by the server\n\n  if (res.ok) return res.json();\n  throw new Error('Bad Request');\n}","map":{"version":3,"names":["getToken","sendRequest","url","method","payload","options","console","log","headers","body","JSON","stringify","token","Authorization","res","fetch","ok","json","Error"],"sources":["/Users/bencampero/code/project-3-base/src/utilities/send-request.js"],"sourcesContent":["import { getToken } from './users-service';\n\nexport default async function sendRequest(url, method = 'GET', payload = null) {\n  const options = { method };\n  console.log(payload)\n  if (payload) {\n    options.headers = { 'Content-Type': 'application/json' };\n    options.body = JSON.stringify(payload);\n  }\n  const token = getToken();\n  if (token) {\n    // Great use case for the Logical OR Assignment Operator\n    options.headers ||= {...options, Authorization: `Bearer ${token}`};\n  }\n  const res = await fetch(url, options);\n  console.log(res)\n  // res.ok will be false if the status code is not 200-299\n  // res.json() returns a promise that resolves\n  // to the data that was sent back by the server\n  if (res.ok) return res.json();\n  throw new Error('Bad Request');\n}"],"mappings":"AAAA,SAASA,QAAT,QAAyB,iBAAzB;AAEA,eAAe,eAAeC,WAAf,CAA2BC,GAA3B,EAAgE;EAAA,IAAhCC,MAAgC,uEAAvB,KAAuB;EAAA,IAAhBC,OAAgB,uEAAN,IAAM;EAC7E,MAAMC,OAAO,GAAG;IAAEF;EAAF,CAAhB;EACAG,OAAO,CAACC,GAAR,CAAYH,OAAZ;;EACA,IAAIA,OAAJ,EAAa;IACXC,OAAO,CAACG,OAAR,GAAkB;MAAE,gBAAgB;IAAlB,CAAlB;IACAH,OAAO,CAACI,IAAR,GAAeC,IAAI,CAACC,SAAL,CAAeP,OAAf,CAAf;EACD;;EACD,MAAMQ,KAAK,GAAGZ,QAAQ,EAAtB;;EACA,IAAIY,KAAJ,EAAW;IACT;IACAP,OAAO,CAACG,OAAR,KAAoB,EAAC,GAAGH,OAAJ;MAAaQ,aAAa,EAAG,UAASD,KAAM;IAA5C,CAApB;EACD;;EACD,MAAME,GAAG,GAAG,MAAMC,KAAK,CAACb,GAAD,EAAMG,OAAN,CAAvB;EACAC,OAAO,CAACC,GAAR,CAAYO,GAAZ,EAb6E,CAc7E;EACA;EACA;;EACA,IAAIA,GAAG,CAACE,EAAR,EAAY,OAAOF,GAAG,CAACG,IAAJ,EAAP;EACZ,MAAM,IAAIC,KAAJ,CAAU,aAAV,CAAN;AACD"},"metadata":{},"sourceType":"module"}